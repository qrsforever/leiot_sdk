IF (NOT LEIOT_ENABLE_OTA)
    RETURN ()
ENDIF (NOT LEIOT_ENABLE_OTA)

IF (${LEIOT_OTA_SIGNAL_CHANNEL} STREQUAL "MQTT")
    IF (NOT LEIOT_ENABLE_MQTT)
        MESSAGE (FATAL_ERROR "Requires MQTT enable!")
    ENDIF ()
    LIST (APPEND LEIOT_DEFINITIONS
        -DLEIOT_ENABLE_OTA
        -DOTA_SIGNAL_CHANNEL=1
        )
ELSEIF (${LEIOT_OTA_SIGNAL_CHANNEL} STREQUAL "COAP")
    IF (NOT LEIOT_ENABLE_COAP)
        MESSAGE (FATAL_ERROR "Requires COAP enable!")
    ENDIF ()
    LIST (APPEND LEIOT_DEFINITIONS
        -DLEIOT_ENABLE_OTA
        -DOTA_SIGNAL_CHANNEL=2
        )
ELSEIF (${LEIOT_OTA_SIGNAL_CHANNEL} STREQUAL "HTTP")
    LIST (APPEND LEIOT_DEFINITIONS
        -DLEIOT_ENABLE_OTA
        -DOTA_SIGNAL_CHANNEL=4
        )
ELSE ()
    MESSAGE (FATAL_ERROR "Requires MQTT or COAP or HTTP enable!")
ENDIF ()

LIST (APPEND LEIOT_INCLUDES ${CMAKE_CURRENT_LIST_DIR})

LIST (APPEND LEIOT_C_SOURCES ${CMAKE_CURRENT_LIST_DIR}/ota.c)

