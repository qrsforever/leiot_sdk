===============================================================================================================================================================================
CASE-START
===============================================================================================================================================================================

CASE1
云的设备影子文档为null时, 设备第一次启动日志: ("errorcode":"407")

[inf] iotx_mc_connect(2040): mqtt connect success!
[dbg] iotx_mc_report_mid(2263): MID Report: started in MQTT
[dbg] iotx_mc_report_mid(2280): MID Report: json data = '{"id":"6nsLZYMc3St_door-1_mid","params":{"_sys_device_mid":"example.demo.module-id","_sys_device_pid":"example.demo.partner-id"}}'
[dbg] iotx_mc_report_mid(2296): MID Report: topic name = '/sys/6nsLZYMc3St/door-1/thing/status/update'
[dbg] MQTTPublish(236): leiot publish topic: /sys/6nsLZYMc3St/door-1/thing/status/update
[dbg] iotx_mc_report_mid(2313): MID Report: finished, IOT_MQTT_Publish() = 0
[inf] iotx_ds_common_generate_topic_name(380): iotx_ds_common_generate_topic_name: /shadow/get/6nsLZYMc3St/door-1
[dbg] MQTTSubscribe(361): leiot subscribe topic: /shadow/get/6nsLZYMc3St/door-1
[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /shadow/get/6nsLZYMc3St/door-1!
[dbg] iotx_mc_cycle(1280): SUBACK
[inf] iotx_ds_event_handle(300): subscribe success, packet-id=1
[inf] IOT_Shadow_Construct(373): Sync device data successfully
[inf] IOT_Shadow_Pull(265): Device Shadow sync start.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 1
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 1
[dbg] IOT_Shadow_Push_Async(175): data(65) = {"method":"get","clientToken":"6nsLZYMc3St.door-1-1","version":1}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[inf] iotx_ds_common_generate_topic_name(380): iotx_ds_common_generate_topic_name: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_ds_common_publish2update(401): publish msg: len=65, str={"method":"get","clientToken":"6nsLZYMc3St.door-1-1","version":1}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00039260
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 178 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"error","content":{"errorcode":"407","errormessage":"shadow content is empty"}},"clientToken":"6nsLZYMc3St.door-1-1","timestamp":1519715119}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519715119]
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"error","content":{"errorcode":"407","errormessage":"shadow content is empty"}}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-1
[dbg] iotx_update_ack_cb(203): ack_code=407
[dbg] iotx_update_ack_cb(206): ack_msg=shadow content is empty
[err] iotx_ds_update_wait_ack_list_handle_response(192): pdata == NULL! LITE_free(pdata) aborted.
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[inf] IOT_Shadow_Pull(278): Device Shadow sync success.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 3
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 3
[dbg] IOT_Shadow_Push_Async(175): data(124) = {"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-3","version":3}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=124, str={"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-3","version":3}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00039272
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 121 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":3},"clientToken":"6nsLZYMc3St.door-1-3","timestamp":1519715120}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519715120]
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":3}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-3
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 5
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 5
[dbg] IOT_Shadow_Push_Async(175): data(124) = {"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-5","version":5}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=124, str={"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-5","version":5}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00039301
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 121 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":5},"clientToken":"6nsLZYMc3St.door-1-5","timestamp":1519715122}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519715122]
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":5}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-5
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.

===============================================================================================================================================================================

CASE2
当云端已经有设备影子时, 设备上电开机日志:

[inf] iotx_mc_connect(2040): mqtt connect success!
[dbg] iotx_mc_report_mid(2263): MID Report: started in MQTT
[dbg] iotx_mc_report_mid(2280): MID Report: json data = '{"id":"6nsLZYMc3St_door-1_mid","params":{"_sys_device_mid":"example.demo.module-id","_sys_device_pid":"example.demo.partner-id"}}'
[dbg] iotx_mc_report_mid(2296): MID Report: topic name = '/sys/6nsLZYMc3St/door-1/thing/status/update'
[dbg] MQTTPublish(236): leiot publish topic: /sys/6nsLZYMc3St/door-1/thing/status/update
[dbg] iotx_mc_report_mid(2313): MID Report: finished, IOT_MQTT_Publish() = 0
[inf] iotx_ds_common_generate_topic_name(380): iotx_ds_common_generate_topic_name: /shadow/get/6nsLZYMc3St/door-1
[dbg] MQTTSubscribe(361): leiot subscribe topic: /shadow/get/6nsLZYMc3St/door-1
[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /shadow/get/6nsLZYMc3St/door-1!
[dbg] iotx_mc_cycle(1280): SUBACK
[inf] iotx_ds_event_handle(300): subscribe success, packet-id=1
[inf] IOT_Shadow_Construct(373): Sync device data successfully
[inf] IOT_Shadow_Pull(265): Device Shadow sync start.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 1
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 1
[dbg] IOT_Shadow_Push_Async(175): data(65) = {"method":"get","clientToken":"6nsLZYMc3St.door-1-1","version":1}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[inf] iotx_ds_common_generate_topic_name(380): iotx_ds_common_generate_topic_name: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_ds_common_publish2update(401): publish msg: len=65, str={"method":"get","clientToken":"6nsLZYMc3St.door-1-1","version":1}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00010986
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 277 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","state":{"reported":{"temperature":1001,"switch":1000}},"metadata":{"reported":{"temperature":{"timestamp":1519715142},"switch":{"timestamp":1519715142}}}},"timestamp":1519715771,"version":23,"clientToken":"6nsLZYMc3St.door-1-1"}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519715771]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 23
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","state":{"reported":{"temperature":1001,"switch":1000}},"metadata":{"reported":{"temperature":{"timestamp":1519715142},"switch":{"timestamp":1519715142}}}}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-1
_device_shadow_cb_light|063 :: ----
_device_shadow_cb_light|064 :: Attrbute Name: 'switch'
_device_shadow_cb_light|065 :: Attrbute Value: 1000
_device_shadow_cb_light|066 :: ----
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 24
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 3
[dbg] iotx_ds_common_publish2update(401): publish msg: len=96, str={"method":"update","state":{"desired":"null"},"clientToken":"6nsLZYMc3St.door-1-3","version":24}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00010988
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 122 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":24},"clientToken":"6nsLZYMc3St.door-1-3","timestamp":1519715771}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519715771]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 23
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":24}
[wrn] iotx_ds_update_wait_ack_list_handle_response(207): Not match any wait element in list.
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.


===============================================================================================================================================================================

CASE3
设备主动上报状态:

[dbg] IOT_Shadow_Push_Async(175): data(126) = {"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-13","version":43}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=126, str={"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-13","version":43}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00042344
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 123 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":43},"clientToken":"6nsLZYMc3St.door-1-13","timestamp":1519716227}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519716227]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 32
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":43}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-13
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 45
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 15
[dbg] IOT_Shadow_Push_Async(175): data(126) = {"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-15","version":45}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=126, str={"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-15","version":45}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00042388
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 123 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":45},"clientToken":"6nsLZYMc3St.door-1-15","timestamp":1519716229}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519716229]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 32
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":45}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-15
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 47
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 17
[dbg] IOT_Shadow_Push_Async(175): data(126) = {"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-17","version":47}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=126, str={"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-17","version":47}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00042418
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 123 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":47},"clientToken":"6nsLZYMc3St.door-1-17","timestamp":1519716231}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519716231]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 32
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":47}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-17
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.

===============================================================================================================================================================================

CASE4
应用程序改变设备状态:

A. App端应用程序首先get一份云端的最新文档, 然后版本号如果不加1, 出现如下错误日志:
getDeviceShadow success b'{"ShadowMessage":"{\\"state\\":{\\"reported\\":{\\"temperature\\":1001,\\"switch\\":1000}},\\"metadata\\":{\\"reported\\":{\\"temperature\\":{\\"timestamp\\":1519717551},\\"switch\\":{\\"timestamp\\":1519717551}}},\\"timestamp\\":1519717551,\\"version\\":81}","RequestId":"A8C3E43E-F159-4240-BD01-15E5F5079BC2","Success":true}'
updateDeviceShadow failed , errorMessage=更新失败，请检查设备影子版本号, requestId=6A0F09E2-BCE4-49F2-A2BA-0114425A511B
getDeviceShadow success b'{"ShadowMessage":"{\\"state\\":{\\"reported\\":{\\"temperature\\":1001,\\"switch\\":1000}},\\"metadata\\":{\\"reported\\":{\\"temperature\\":{\\"timestamp\\":1519717554},\\"switch\\":{\\"timestamp\\":1519717554}}},\\"timestamp\\":1519717554,\\"version\\":83}","RequestId":"96B33CA0-3A5B-4BDE-8DE1-8D9C2A4B5663","Success":true}'
updateDeviceShadow failed , errorMessage=更新失败，请检查设备影子版本号, requestId=81E53502-954E-47E1-BA79-7C24E59B22FD

B. App端应用程序获取云端最新json文档后
getDeviceShadow success b'{"ShadowMessage":"{\\"state\\":{\\"reported\\":{\\"temperature\\":1,\\"switch\\":1}},\\"metadata\\":{\\"reported\\":{\\"temperature\\":{\\"timestamp\\":1519801785},\\"switch\\":{\\"timestamp\\":1519801785}}},\\"timestamp\\":1519801785,\\"version\\":2412}","RequestId":"91ACA2F4-BFEE-426C-B5D1-CF11FA45B47E","Success":true}'
updateDeviceShadow version:  2413

C. 对应于B的设备端日志
[dbg] iotx_mc_cycle(1294): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1107):         Packet Ident : 00001782
[dbg] iotx_mc_handle_recv_PUBLISH(1108):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1112):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1115):     Payload Len/Room : 343 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1116):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1127): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"control","payload":{"state":{"desired":{"temperature":1,"switch":1},"reported":{"temperature":1,"switch":1}},"metadata":{"desired":{"temperature":{"timestamp":1519801787},"switch":{"timestamp":1519801787}},"reported":{"temperature":{"timestamp":1519801785},"switch":{"timestamp":1519801785}}}},"timestamp":1519801787,"version":2413}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(87): receive 'control' method
_device_shadow_cb_light|063 :: ----
_device_shadow_cb_light|064 :: Attrbute Name: 'switch'
_device_shadow_cb_light|065 :: Attrbute Value: 1
_device_shadow_cb_light|066 :: ----
[dbg] iotx_ds_common_publish2update(396): publish msg: len=98, str={"method":"update","state":{"desired":"null"},"clientToken":"6nsLZYMc3St.door-1-9","version":2414}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(107): End of method handle
[dbg] iotx_mc_cycle(1277): PUBACK
[dbg] iotx_mc_cycle(1294): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1107):         Packet Ident : 00001784
[dbg] iotx_mc_handle_recv_PUBLISH(1108):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1112):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1115):     Payload Len/Room : 124 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1116):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1127): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":2414},"clientToken":"6nsLZYMc3St.door-1-9","timestamp":1519801787}
[inf] iotx_ds_common_update_time(252): update system time
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":2414}
[wrn] iotx_ds_update_wait_ack_list_handle_response(207): Not match any wait element in list.
[dbg] iotx_shadow_callback_get(107): End of method handle

===============================================================================================================================================================================

CASE5
设备主动获取设备影子内容(非上电后第一次获取影子文档):

demo_device_shadow|163 :: ======== Will PULL (get) ===========
[inf] IOT_Shadow_Pull(265): Device Shadow sync start.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 52
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 7
[dbg] IOT_Shadow_Push_Async(175): data(66) = {"method":"get","clientToken":"6nsLZYMc3St.door-1-7","version":52}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=66, str={"method":"get","clientToken":"6nsLZYMc3St.door-1-7","version":52}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00052517
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 277 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","state":{"reported":{"temperature":1001,"switch":1000}},"metadata":{"reported":{"temperature":{"timestamp":1519716416},"switch":{"timestamp":1519716416}}}},"timestamp":1519716425,"version":50,"clientToken":"6nsLZYMc3St.door-1-7"}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519716425]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 50
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","state":{"reported":{"temperature":1001,"switch":1000}},"metadata":{"reported":{"temperature":{"timestamp":1519716416},"switch":{"timestamp":1519716416}}}}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-7
_device_shadow_cb_light|063 :: ----
_device_shadow_cb_light|064 :: Attrbute Name: 'switch'
_device_shadow_cb_light|065 :: Attrbute Value: 1000
_device_shadow_cb_light|066 :: ----
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 54
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 9
[dbg] iotx_ds_common_publish2update(401): publish msg: len=96, str={"method":"update","state":{"desired":"null"},"clientToken":"6nsLZYMc3St.door-1-9","version":54}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00052518
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 122 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":54},"clientToken":"6nsLZYMc3St.door-1-9","timestamp":1519716425}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519716425]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 50
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":54}
[wrn] iotx_ds_update_wait_ack_list_handle_response(207): Not match any wait element in list.
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[inf] IOT_Shadow_Pull(278): Device Shadow sync success.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 56
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 11
[dbg] IOT_Shadow_Push_Async(175): data(126) = {"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-11","version":56}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=126, str={"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-11","version":56}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00052524
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 123 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":56},"clientToken":"6nsLZYMc3St.door-1-11","timestamp":1519716426}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519716426]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 50
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":56}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-11
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.


===============================================================================================================================================================================

CASE6
设备端删除影子属性:

demo_device_shadow|166 :: ======== IOT_Shadow_DeleteAttribute(attr_temperature) ===========
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 61
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 7
[dbg] IOT_Shadow_Push_Async(175): data(114) = {"method":"delete",,"state":{"reported":{"temperature":"null"}},"clientToken":"6nsLZYMc3St.door-1-7","version":61}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=114, str={"method":"delete",,"state":{"reported":{"temperature":"null"}},"clientToken":"6nsLZYMc3St.door-1-7","version":61}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00031792
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 122 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":61},"clientToken":"6nsLZYMc3St.door-1-7","timestamp":1519716571}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519716571]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 56
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":61}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-7
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[inf] iotx_ds_common_get_version(334): iotx_ds_common_get_version: 63
[inf] iotx_ds_common_get_tokennum(347): iotx_ds_common_get_tokennum: 9
[dbg] IOT_Shadow_Push_Async(175): data(125) = {"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-9","version":63}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(401): publish msg: len=125, str={"method":"update","state":{"reported":{"temperature":1001,"switch":1000}},"clientToken":"6nsLZYMc3St.door-1-9","version":63}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/6nsLZYMc3St/door-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00031796
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 30
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 122 / 987
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/6nsLZYMc3St/door-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":63},"clientToken":"6nsLZYMc3St.door-1-9","timestamp":1519716572}
[inf] iotx_ds_common_update_time(253): iotx_ds_common_update_time: update system time[1519716572]
[inf] iotx_ds_common_update_version(321): iotx_ds_common_update_version: update shadow version: 56
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":63}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=6nsLZYMc3St.door-1-9
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.

===============================================================================================================================================================================

CASE-END
===============================================================================================================================================================================

一份比较全的日志:
[dbg] IOT_SetupConnInfo(73): SDK Build Version : 1.0.0
[dbg] IOT_SetupConnInfo(74): SDK Build Datetime: 20180224205128
[inf] iotx_device_info_init(41): device_info created successfully!
[dbg] iotx_device_info_set(51): start to set device info!
[dbg] iotx_device_info_set(65): device_info set successfully!
[dbg] _calc_hmac_signature(57): | source: clientId9RrZXcGctqe.air-1deviceNameair-1productKey9RrZXcGctqetimestamp2524608000000 (83)
[dbg] _calc_hmac_signature(58): | secret: h9JVOI27YjzvJwhNjKzbzXwuuHQdLFtE (32)
[dbg] _calc_hmac_signature(61): | method: hmacsha1
[dbg] _calc_hmac_signature(74): | signature: 470185101986f1e922d95640f9f4671763d12ce1 (40)
[dbg] guider_print_dev_guider_info(236): ....................................................
[dbg] guider_print_dev_guider_info(237):           ProductKey : 9RrZXcGctqe
[dbg] guider_print_dev_guider_info(238):           DeviceName : air-1
[dbg] guider_print_dev_guider_info(239):             DeviceID : 9RrZXcGctqe.air-1
[dbg] guider_print_dev_guider_info(240):         DeviceSecret : h9JVOI27YjzvJwhNjKzbzXwuuHQdLFtE
[dbg] guider_print_dev_guider_info(241): ....................................................
[dbg] guider_print_dev_guider_info(242):        PartnerID Buf : ,partner_id=example.demo.partner-id
[dbg] guider_print_dev_guider_info(243):         ModuleID Buf : ,module_id=example.demo.module-id
[dbg] guider_print_dev_guider_info(244):           Guider URL : 
[dbg] guider_print_dev_guider_info(246):       Guider SecMode : 2 (TLS + Direct)
[dbg] guider_print_dev_guider_info(248):     Guider Timestamp : 2524608000000
[dbg] guider_print_dev_guider_info(249): ....................................................
[dbg] guider_print_dev_guider_info(250):          Guider Sign : 470185101986f1e922d95640f9f4671763d12ce1
[dbg] guider_print_dev_guider_info(255): ....................................................
[dbg] guider_print_conn_info(213): -----------------------------------------
[dbg] guider_print_conn_info(214):             Host : 9RrZXcGctqe.iot-as-mqtt.cn-shanghai.aliyuncs.com
[dbg] guider_print_conn_info(215):             Port : 1883
[dbg] guider_print_conn_info(216):         UserName : air-1&9RrZXcGctqe
[dbg] guider_print_conn_info(217):         PassWord : 470185101986f1e922d95640f9f4671763d12ce1
[dbg] guider_print_conn_info(218):         ClientID : 9RrZXcGctqe.air-1|securemode=2,timestamp=2524608000000,signmethod=hmacsha1,gw=0,partner_id=example.demo.partner-id,module_id=example.demo.module-id|
[dbg] guider_print_conn_info(220):       TLS PubKey : 0x48b8d0 ('-----BEGIN CERTI ...')
[dbg] guider_print_conn_info(223): -----------------------------------------
[inf] iotx_mc_init(1709): MQTT init success!
[inf] _ssl_client_init(176): Loading the CA root certificate ...
cert. version     : 3
serial number     : 04:00:00:00:00:01:15:4B:5A:C3:94
issuer name       : C=BE, O=GlobalSign nv-sa, OU=Root CA, CN=GlobalSign Root CA
subject name      : C=BE, O=GlobalSign nv-sa, OU=Root CA, CN=GlobalSign Root CA
issued  on        : 1998-09-01 12:00:00
expires on        : 2028-01-28 12:00:00
signed using      : RSA with SHA1
RSA key size      : 2048 bits
basic constraints : CA=true
key usage         : Key Cert Sign, CRL Sign
[inf] _ssl_parse_crt(144): crt content:451
[inf] _ssl_client_init(184):  ok (0 skipped)
[inf] _TLSConnectNetwork(346): Connecting to /9RrZXcGctqe.iot-as-mqtt.cn-shanghai.aliyuncs.com/1883...
[inf] mbedtls_net_connect_timeout(291): setsockopt SO_SNDTIMEO timeout: 10s
[inf] _TLSConnectNetwork(359):  ok
[inf] _TLSConnectNetwork(364):   . Setting up the SSL/TLS structure...
[inf] _TLSConnectNetwork(374):  ok
[inf] _TLSConnectNetwork(409): Performing the SSL/TLS handshake...
[inf] _TLSConnectNetwork(417):  ok
[inf] _TLSConnectNetwork(421):   . Verifying peer X.509 certificate..
[inf] _real_confirm(93): certificate verification result: 0x00
[dbg] iotx_mc_connect(2020): start MQTT connection with parameters: clientid=9RrZXcGctqe.air-1|securemode=2,timestamp=2524608000000,signmethod=hmacsha1,gw=0,partner_id=example.demo.partner-id,module_id=example.demo.module-id|, username=air-1&9RrZXcGctqe, password=470185101986f1e922d95640f9f4671763d12ce1
[inf] iotx_mc_connect(2040): mqtt connect success!
[dbg] iotx_mc_report_mid(2263): MID Report: started in MQTT
[dbg] iotx_mc_report_mid(2280): MID Report: json data = '{"id":"9RrZXcGctqe_air-1_mid","params":{"_sys_device_mid":"example.demo.module-id","_sys_device_pid":"example.demo.partner-id"}}'
[dbg] iotx_mc_report_mid(2296): MID Report: topic name = '/sys/9RrZXcGctqe/air-1/thing/status/update'
[dbg] MQTTPublish(236): leiot publish topic: /sys/9RrZXcGctqe/air-1/thing/status/update
[dbg] iotx_mc_report_mid(2313): MID Report: finished, IOT_MQTT_Publish() = 0
[dbg] MQTTSubscribe(361): leiot subscribe topic: /shadow/get/9RrZXcGctqe/air-1
[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /shadow/get/9RrZXcGctqe/air-1!
[dbg] iotx_mc_cycle(1280): SUBACK
[inf] iotx_ds_event_handle(300): subscribe success, packet-id=1
[inf] IOT_Shadow_Construct(373): Sync device data successfully
[inf] IOT_Shadow_Pull(265): Device Shadow sync start.
[dbg] IOT_Shadow_Push_Async(175): data(64) = {"method":"get","clientToken":"9RrZXcGctqe.air-1-1","version":1}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(396): publish msg: len=64, str={"method":"get","clientToken":"9RrZXcGctqe.air-1-1","version":1}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/9RrZXcGctqe/air-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020500
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 321 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","state":{"reported":{"temperature":"8","id":"3333","switch":"1000"}},"metadata":{"reported":{"temperature":{"timestamp":1519476807},"id":{"timestamp":1519476806},"switch":{"timestamp":1519476807}}}},"timestamp":1519476830,"version":2815,"clientToken":"9RrZXcGctqe.air-1-1"}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","state":{"reported":{"temperature":"8","id":"3333","switch":"1000"}},"metadata":{"reported":{"temperature":{"timestamp":1519476807},"id":{"timestamp":1519476806},"switch":{"timestamp":1519476807}}}}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=9RrZXcGctqe.air-1-1
_device_shadow_cb_light|056 :: ----
_device_shadow_cb_light|057 :: Attrbute Name: 'switch'
_device_shadow_cb_light|058 :: Attrbute Value: 1000
_device_shadow_cb_light|059 :: ----
[dbg] iotx_ds_common_publish2update(396): publish msg: len=97, str={"method":"update","state":{"desired":"null"},"clientToken":"9RrZXcGctqe.air-1-3","version":2816}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/9RrZXcGctqe/air-1
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020501
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 123 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":2816},"clientToken":"9RrZXcGctqe.air-1-3","timestamp":1519476830}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":2816}
[wrn] iotx_ds_update_wait_ack_list_handle_response(207): Not match any wait element in list.
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[inf] IOT_Shadow_Pull(278): Device Shadow sync success.
[dbg] IOT_Shadow_Push_Async(175): data(123) = {"method":"update","state":{"reported":{"temperature":8,"switch":1000}},"clientToken":"9RrZXcGctqe.air-1-5","version":2818}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(396): publish msg: len=123, str={"method":"update","state":{"reported":{"temperature":8,"switch":1000}},"clientToken":"9RrZXcGctqe.air-1-5","version":2818}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/9RrZXcGctqe/air-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020503
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 123 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":2818},"clientToken":"9RrZXcGctqe.air-1-5","timestamp":1519476831}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":2818}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=9RrZXcGctqe.air-1-5
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[dbg] IOT_Shadow_Push_Async(175): data(123) = {"method":"update","state":{"reported":{"temperature":8,"switch":1000}},"clientToken":"9RrZXcGctqe.air-1-7","version":2820}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(396): publish msg: len=123, str={"method":"update","state":{"reported":{"temperature":8,"switch":1000}},"clientToken":"9RrZXcGctqe.air-1-7","version":2820}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/9RrZXcGctqe/air-1
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020505
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 393 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"control","payload":{"state":{"desired":{"temperature":1,"window":"open"},"reported":{"temperature":8,"id":"3333","switch":1000}},"metadata":{"desired":{"temperature":{"timestamp":1519476832},"window":{"timestamp":1519476832}},"reported":{"temperature":{"timestamp":1519476831},"id":{"timestamp":1519476832},"switch":{"timestamp":1519476831}}}},"timestamp":1519476832,"version":2819}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(87): receive 'control' method
[dbg] iotx_ds_common_publish2update(396): publish msg: len=97, str={"method":"update","state":{"desired":"null"},"clientToken":"9RrZXcGctqe.air-1-9","version":2822}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(107): End of method handle
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020507
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 123 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":2820},"clientToken":"9RrZXcGctqe.air-1-7","timestamp":1519476833}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":2820}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=9RrZXcGctqe.air-1-7
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020508
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 123 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":2822},"clientToken":"9RrZXcGctqe.air-1-9","timestamp":1519476833}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":2822}
[wrn] iotx_ds_update_wait_ack_list_handle_response(207): Not match any wait element in list.
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[dbg] IOT_Shadow_Push_Async(175): data(124) = {"method":"update","state":{"reported":{"temperature":1,"switch":1000}},"clientToken":"9RrZXcGctqe.air-1-11","version":2824}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(396): publish msg: len=124, str={"method":"update","state":{"reported":{"temperature":1,"switch":1000}},"clientToken":"9RrZXcGctqe.air-1-11","version":2824}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/9RrZXcGctqe/air-1
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020512
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 397 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"control","payload":{"state":{"desired":{"temperature":2,"window":"open"},"reported":{"temperature":"8","id":"3333","switch":"1000"}},"metadata":{"desired":{"temperature":{"timestamp":1519476835},"window":{"timestamp":1519476835}},"reported":{"temperature":{"timestamp":1519476833},"id":{"timestamp":1519476835},"switch":{"timestamp":1519476833}}}},"timestamp":1519476835,"version":2823}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(87): receive 'control' method
[dbg] iotx_ds_common_publish2update(396): publish msg: len=98, str={"method":"update","state":{"desired":"null"},"clientToken":"9RrZXcGctqe.air-1-13","version":2826}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(107): End of method handle
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020513
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 124 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":2824},"clientToken":"9RrZXcGctqe.air-1-11","timestamp":1519476835}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":2824}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=9RrZXcGctqe.air-1-11
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020514
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 124 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":2826},"clientToken":"9RrZXcGctqe.air-1-13","timestamp":1519476836}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":2826}
[wrn] iotx_ds_update_wait_ack_list_handle_response(207): Not match any wait element in list.
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.
[dbg] IOT_Shadow_Push_Async(175): data(124) = {"method":"update","state":{"reported":{"temperature":2,"switch":1000}},"clientToken":"9RrZXcGctqe.air-1-15","version":2828}
[dbg] iotx_shadow_update_wait_ack_list_add(76): Add update ACK list
[dbg] iotx_ds_common_publish2update(396): publish msg: len=124, str={"method":"update","state":{"reported":{"temperature":2,"switch":1000}},"clientToken":"9RrZXcGctqe.air-1-15","version":2828}
[dbg] MQTTPublish(236): leiot publish topic: /shadow/update/9RrZXcGctqe/air-1
[dbg] iotx_mc_cycle(1271): PUBACK
[dbg] iotx_mc_cycle(1288): PUBLISH
[dbg] iotx_mc_handle_recv_PUBLISH(1101):         Packet Ident : 00020518
[dbg] iotx_mc_handle_recv_PUBLISH(1102):         Topic Length : 29
[dbg] iotx_mc_handle_recv_PUBLISH(1106):           Topic Name : /shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_mc_handle_recv_PUBLISH(1109):     Payload Len/Room : 124 / 988
[dbg] iotx_mc_handle_recv_PUBLISH(1110):       Receive Buflen : 1024
[dbg] iotx_mc_handle_recv_PUBLISH(1121): delivering msg ...
[dbg] iotx_mc_deliver_message(876): topic be matched
[dbg] iotx_shadow_callback_get(63): topic=/shadow/get/9RrZXcGctqe/air-1
[dbg] iotx_shadow_callback_get(64): data of topic={"method":"reply","payload":{"status":"success","version":2828},"clientToken":"9RrZXcGctqe.air-1-15","timestamp":1519476838}
[inf] iotx_ds_common_update_time(252): update system time
[inf] iotx_ds_common_update_version(320): update shadow version
[dbg] iotx_shadow_callback_get(96): receive 'reply' method
[dbg] iotx_ds_update_wait_ack_list_handle_response(139): ppayload = {"status":"success","version":2828}
[dbg] iotx_ds_update_wait_ack_list_handle_response(149): token=9RrZXcGctqe.air-1-15
[dbg] iotx_update_ack_cb(203): ack_code=200
[dbg] iotx_update_ack_cb(208): ack_msg is NULL
[dbg] iotx_shadow_callback_get(107): End of method handle
[inf] IOT_Shadow_Push(244): update success.

===============================================================================================================================================================================
应用app端设置desired字段

./Test.py 
getDeviceShadow success b'{"ShadowMessage":"{\\"state\\":{\\"reported\\":{\\"temperature\\":8,\\"switch\\":1000,\\"id\\":\\"3333\\"}},\\"metadata\\":{\\"reported\\":{\\"temperature\\":{\\"timestamp\\":1519476831},\\"switch\\":{\\"timestamp\\":1519476831},\\"id\\":{\\"timestamp\\":1519476806}}},\\"timestamp\\":1519476831,\\"version\\":2818}","RequestId":"09A22080-9818-4F4A-9AB4-09E812149514","Success":true}'
updateDeviceShadow success 
getDeviceShadow success b'{"ShadowMessage":"{\\"state\\":{\\"reported\\":{\\"temperature\\":\\"8\\",\\"id\\":\\"3333\\",\\"switch\\":\\"1000\\"}},\\"metadata\\":{\\"reported\\":{\\"temperature\\":{\\"timestamp\\":1519476833},\\"id\\":{\\"timestamp\\":1519476832},\\"switch\\":{\\"timestamp\\":1519476833}}},\\"timestamp\\":1519476833,\\"version\\":2822}","RequestId":"0420112A-E3ED-414C-89E4-D3BECA1C4C92","Success":true}'
updateDeviceShadow success 
getDeviceShadow success b'{"ShadowMessage":"{\\"state\\":{\\"reported\\":{\\"temperature\\":2,\\"switch\\":1000,\\"id\\":\\"3333\\"}},\\"metadata\\":{\\"reported\\":{\\"temperature\\":{\\"timestamp\\":1519476838},\\"switch\\":{\\"timestamp\\":1519476838},\\"id\\":{\\"timestamp\\":1519476835}}},\\"timestamp\\":1519476838,\\"version\\":2828}","RequestId":"3FF1B672-CECE-4B31-AA2B-2811229FEB37","Success":true}'
updateDeviceShadow success 
getDeviceShadow success b'{"ShadowMessage":"{\\"state\\":{\\"reported\\":{\\"temperature\\":\\"2\\",\\"id\\":\\"3333\\",\\"switch\\":\\"1000\\"}},\\"metadata\\":{\\"reported\\":{\\"temperature\\":{\\"timestamp\\":1519476840},\\"id\\":{\\"timestamp\\":1519476839},\\"switch\\":{\\"timestamp\\":1519476840}}},\\"timestamp\\":1519476840,\\"version\\":2832}","RequestId":"CA7E299B-6A0B-4137-9937-5B70BEA733EB","Success":true}'
updateDeviceShadow success 

===============================================================================================================================================================================
